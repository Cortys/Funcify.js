/**
 * Funcify.js 1.0
 * 2013 - Clemens Damke
 * License: WTFPL - Have fun! Credits only if you want to.
 */
var Funcify=function(e){function s(e){if(f(e)&&e.container)e=n[e.funcifyId];if(e.getRaw)return e.getRaw;return e.getRaw=i.exec(e.toString())}function o(e){var t=e.split(/[\n\r]/);for(var n=0;n<t.length;n++){t[n]=t[n].trim();if(!t[n]){t.splice(n,1);n--}}return t}function u(e){var t=e.split(",");for(var n=0;n<t.length;n++)t[n]=t[n].trim();return t}function a(e){return e&&t[e.name]}function f(e){return e&&e.funcifyId!==undefined&&n[e.funcifyId]}function l(e){var t=function(){return n[e].apply(this,arguments)};Object.defineProperty(t,"funcifyId",{value:e,writable:false,enumerable:false,configurable:false});Object.defineProperty(t,"container",{value:true,writable:false,enumerable:false,configurable:false});Object.defineProperty(t,"toString",{value:function(){return n[e].toString()},writable:false,enumerable:true,configurable:false});return t}var t=e,n=[],r=0,i=/^function[^(]+\(([^)]*)\)\s*\{[\s]{0,1}([\s\S]*)\}$/;this.get=function(e,t,n){if(typeof e=="function"){var r=s(e);return{name:e.name,params:t?r[1]:u(r[1]),lines:t&&n===undefined||n?r[2]:o(r[2])}}return false};this.getLines=function(e,t){if(typeof e=="function"){var n=s(e)[2];return t?n:o(n)}return false};this.getParams=function(e,t){if(typeof e=="function"){var n=s(e)[1];return t?n:u(n)}return false};this.make=function(e,t,n){var r=e,i=t;if(typeof e=="function"){var s=this.get(e,false,true);r=s.params;i=s.lines}else if(typeof e=="string")r=u(e);else if(e&&e.params!==undefined&&e.lines!==undefined){r=e.params;i=e.lines;if(typeof r=="string")r=u(r);if(i instanceof Array)i=i.join("\n")}else if(!(e instanceof Array))r=false;if(t){if(t instanceof Array)i=t.join("\n");else if(typeof t!="string")i=false}if(r&&i){r.push(i);var o=Function.apply(null,r);return n?o:this.functions(o)}return false};this.functions=function(e){if(f(e))return e;while(n[r])r++;n[r]=e;e.funcifyId=r;var i=l(r++);if(a(e))t[e.name]=i;return i};this.set=function(e,t,r){e=fy(e);var i=this.make(t,r,true);if(i){n[e.funcifyId]=i;i.funcifyId=e.funcifyId;return true}return false};this.setLines=function(e,t){return this.set(e,this.getParams(e),t)};this.setParams=function(e,t){return this.set(e,t,this.getLines(e,true))};this.modifyLines=function(e,t,n,r){var i=this.get(e);if(!(r instanceof Array)){if(typeof r=="string")r=[r];else if(typeof r=="function")r=this.getLines(r);else return false}i.lines.splice.apply(i.lines,[t,n].concat(r));return this.set(e,i)};this.addLines=function(e,t){var n=this.get(e);if(!(t instanceof Array)){if(typeof t=="string")t=[t];else if(typeof t=="function")t=this.getLines(t);else return false}n.lines=n.lines.concat(t);return this.set(e,n)};this.addParams=function(e,t){var n=this.get(e);if(!(t instanceof Array)){if(typeof t=="string")t=[t];else if(typeof t=="function")t=this.getParams(t);else return false}n.params=n.params.concat(t);return this.set(e,n)}};var funcify=new Funcify(window);var fy=function(e){return funcify.functions(e)};for(var key in funcify){if(key!="make")Function.prototype[key]=new Function("return funcify."+key+".apply(funcify, [this].concat([].splice.call(arguments,0)));")}Function.make=function(e,t){return funcify.make(e,t)}