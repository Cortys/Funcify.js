/**
 * Funcify.js 1.1.1
 * 2013 - Clemens Damke
 * License: WTFPL - Have fun! Credits only if you want to.
 */
var Funcify=function(e){function o(e){if(c(e)&&e.container)e=n[e.funcifyId];if(e.getRaw)return e.getRaw;return e.getRaw=i.exec(e.toString())}function u(e,t){var n=e.split(t);for(var r=0;r<n.length;r++){n[r]=n[r].trim();if(!n[r]){n.splice(r,1);r--}}return n}function a(e){return u(e,/[\n\r]/)}function f(e){return u(e,",")}function l(e){return e&&t[e.name]}function c(e){return e&&e.funcifyId!==undefined&&n[e.funcifyId]}function h(e){var t=function(){return n[e].apply(this,arguments)};var r={funcifyId:e,container:true,toString:function(){return n[e].toString()}};for(var i in r)Object.defineProperty.call(Object,t,i,{value:r[i],writable:false,enumerable:false,configurable:false});return t}function p(e,t){if(!(e instanceof Array)){if(typeof e=="string")e=[e];else if(typeof e=="function")e=t(e);else return false}return e}function d(e,t,n){var r=this.get(e,n=="lines",n=="params");if((t=p(t,this["get"+n.charAt(0).toUpperCase()+n.slice(1)]))===false)return false;r[n]=r[n].concat(t);return this.set(e,r)}var t=e,n=[],r=0,i=/^function[^(]+\(([^)]*)\)\s*\{[\s]{0,1}([\s\S]*)\}$/,s="\n";this.get=function(e,t,n){if(typeof e=="function"){var r=o(e);return{name:e.name,params:t?r[1]:f(r[1]),lines:t&&n===undefined||n?r[2]:a(r[2])}}return false};this.getLines=function(e,t){if(typeof e=="function"){var n=o(e)[2];return t?n:a(n)}return false};this.getParams=function(e,t){if(typeof e=="function"){var n=o(e)[1];return t?n:f(n)}return false};this.make=function(e,t,n){var r=e,i=t;if(typeof e=="function"){var o=this.get(e,true);r=[o.params];i=o.lines}else if(typeof e=="string")r=[e];else if(e&&e.params!==undefined&&e.lines!==undefined){r=e.params;i=e.lines;if(typeof r=="string")r=[r];if(i instanceof Array)i=i.join(s)}else if(!(e instanceof Array))r=false;if(t){if(t instanceof Array)i=t.join(s);else if(typeof t!="string")i=false}if(r!==false&&typeof i=="string"){r.push(i.trim());var u=Function.apply(null,r);return n?u:this.functions(u)}return false};this.functions=function(e){if(c(e))return e;while(n[r])r++;n[r]=e;e.funcifyId=r;var i=h(r++);if(l(e))t[e.name]=i;return i};this.set=function(e,t,r){e=fy(e);var i=this.make(t,r,true);if(i){n[e.funcifyId]=i;i.funcifyId=e.funcifyId;return true}return false};this.setLines=function(e,t){return this.set(e,this.getParams(e),t)};this.setParams=function(e,t){return this.set(e,t,this.getLines(e,true))};this.modifyLines=function(e,t,n,r){var i=this.get(e,true,false);if((r=p(r,this.getLines))===false)return false;i.lines.splice.apply(i.lines,[t,n].concat(r));return this.set(e,i)};this.addLines=function(e,t){return d.call(this,e,t,"lines")};this.addParams=function(e,t){return d.call(this,e,t,"params")};this.replaceLines=function(e,t,n,r){var i=this.get(e,true);if(n.lines!==undefined&&n.params!==undefined)n=n.lines;i.lines=i.lines.replace(t,r&&typeof n=="function"?n.getLines(true):n instanceof Array?n.join(s):n);return this.set(e,i)}};var funcify=new Funcify(typeof window!="undefined"?window:global);var fy=function(e){return funcify.functions(e)};for(var key in funcify)if(key!="make")(function(e){Function.prototype[e]=function(){return funcify[e].apply(funcify,[this].concat([].splice.call(arguments,0)))}})(key);Function.make=function(e,t){return funcify.make(e,t)}